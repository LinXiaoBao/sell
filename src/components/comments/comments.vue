<template>  <div class="comments-wrap">  	<div class="header border-1px">  		<div class="score-wrapper">  			<p class="score">{{seller.score}}</p>  			<p class="score-name">综合评分</p>  			<p class="rank-rate">高于周边商家{{seller.rankRate}}%</p>  		</div>  		<div class="score-detail">  			<div class="service">  				<span class="name">服务态度</span>  				<span class="stars-wrapper">  					<stars :size='36' :score='seller.serviceScore'></stars>  				</span>  				<span class="service-score scores">{{seller.serviceScore}}</span>  			</div>  			<div class="food">  				<span class="name">商品评分</span>  				<span class="stars-wrapper">  					<stars :size='36' :score='seller.foodScore'></stars>  				</span>  				<span class="food-score scores">{{seller.foodScore}}</span>  			</div>			<div class="delivery">				<span class="name">送达时间</span>				<span class="delivery-time">{{seller.deliveryTime}}分钟到达</span>			</div>  		</div>  	</div>  	<div class="empty border-1px"></div>  	<div class="rating-wrapper">  		<div class="button-wrap border-1px">  			<div class="btn all"  				:class="{'active': ratingTypeFilter==-1}"   				@click="changeRatingType(-1)">全部</div>  			<div class="btn content"  				:class="{'active': ratingTypeFilter==0}"   				@click="changeRatingType(0)">满意</div>  			<div class="btn discontent"  				:class="{'active': ratingTypeFilter==1}"   				@click="changeRatingType(1)">不满意</div>  		</div>  		<div class="filter border-1px" @click="toggleOnlyText">  			<span   				class="icon-check_circle"  				:class="{  					'cl-green': onlyRatingText  				}"></span>  			<span class="name">只看有内容的评价</span>  		</div>  		<div class="ratings">  			<ul>  				<li v-for='rating in selectedRatings'>  					<div class="avatar">  						<img :src="rating.avatar">  					</div>  					<div class="content">  							<span class="username">{{rating.username}}</span>							<span class="rate-time fr">								{{changeDate(rating.rateTime)}}							</span>							<div>								<span class="stars-wrapper">									<stars :size='24' :score='rating.score'>									</stars>								</span>								<span class="delivery-time" v-show='rating.deliveryTime'>									{{rating.deliveryTime}}分钟送达								</span>							</div>														<div class="text" v-show='rating.text'>{{rating.text}}</div>							<div class="icon-recommand">								<span class="icon-thumb_up icon-thumb" v-if='rating.rateType == 0' ></span>								<span class="icon-thumb_down icon-thumb" v-if='rating.rateType == 1'></span>								<div class="recommend-wrapper">									<span v-if='rating.recommend' 										class="recommend" 										v-for='recommend in rating.recommend'>										{{recommend}}									</span>								</div>							</div>							  					</div>  					  				</li>  			</ul>  		</div>  	</div>  </div>  </template><script>import stars from '../stars/stars.vue'export default {  	name: 'comments',  	components: {  		stars  	},  	data(){  		return {  			ratings: [],  			ratingTypeFilter: -1, // -1: 全部， 0: 满意， 1: 不满意  			onlyRatingText: true,  		}  	},  	computed: {  		seller() {  			return this.$store.state.seller  		},  		selectedRatings() {  			let ratingList = [];  			if(this.onlyRatingText){  				ratingList = this.ratings.filter(elem => {  					return elem.text.trim();  				});  			}  			else{  				ratingList = this.ratings;  			}  			if(this.ratingTypeFilter == -1){  				return ratingList;  			} else{  				return ratingList.filter(elem => {  					return (elem.rateType == this.ratingTypeFilter);  				});  			}  		},  	},  	created() {  		this.$http.get('/api/ratings').then(response => {    		this.ratings = response.body.data;  		}, response => {});  	},  	methods: {  		changeRatingType(type) {  			this.ratingTypeFilter = type;  		},  		toggleOnlyText() {  			this.onlyRatingText = !this.onlyRatingText;  		},  		changeDate(time){  			let date = new Date(time);			let Y = date.getFullYear() + '-';			let M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';			let D = date.getDate() + ' ';			let h = date.getHours() + ':';			let m = date.getMinutes();			let s = date.getSeconds(); 			return Y+M+D+h+m;  		}  	}}</script><!-- Add "scoped" attribute to limit CSS to this component only --><style lang="less" scoped>.comments-wrap{	width: 100%;	height: 100%;	overflow-x: hidden;	overflow-y: auto;	-webkit-overflow-scrolling : touch;			overflow-scrolling : touch;	&::-webkit-scrollbar { 	    display: none; 	    height: 0;	    width: 0;	}	.header{		display: flex;		.score-wrapper{			flex: 275;			padding: 18px 0;			text-align: center;			.score{				font-size: 24px;				color: rgb(255, 153, 0);				line-height: 28px;				margin-bottom: 6px;			}			.score-name{				font-size: 12px;				line-height: 12px;				color: rgb(7, 17, 27);				margin-bottom: 8px;			}			.rank-rate{				font-size: 10px;				line-height: 12px;				color: rgb(147, 153, 159);				margin-bottom: 6px;			}		}		.score-detail{			flex: 475;			margin: 18px 0;			padding: 0 24px;			border-left: 1px solid rgba(7, 17, 27, 0.1); 			.service , .food {				margin-bottom: 8px;			}			span{				display: inline-block;				&.name {					width: auto;					font-size: 12px;					line-height: 18px;					color: rgb(7, 17, 27);					margin-right: 12px; 				}				&.stars-wrapper{					margin-right: 12px;					vertical-align: bottom;				}				&.scores{					font-size: 12px;					color: rgb(255, 153, 0);				}				&.delivery-time{					font-size: 12px;					color: rgb(147, 153, 159);					line-height: 18px;				}							}		}	}	.rating-wrapper{		width: 100%;		.button-wrap{			margin: 0 24px;			width: calc(100% - 48)px;			.btn {				display: inline-block;				box-sizing: content-box;				border: 0;				padding: 8px 15px;				font-size: 12px;				margin: 18px 6px 18px 0;				border-radius: 3px;				color: #6d7885;			    background-color: #ebf5ff;				&.all.active, &.content.active{				    color: #fff;    				background-color: #3190e8;				}				&.discontent {					color: #aaa;    				background-color: #f5f5f5;    				&.active{    					color: #fff;    					background-color: #ccc;    				}				}			}		}		.filter{			color: #b7bbbf;			line-height: 40px;			font-size: 0;			.icon-check_circle {				font-size: 18px;				margin:0 5px 0 24px;				position: relative;				top: 3px; 			}			.name {				font-size: 12px;			}		}		.ratings{			ul{				li {					display: flex;					box-sizing: border-box;					width: 100%;					padding: 18px;					.avatar{						flex: 0 0 28px;						margin-right: 12px;						img{							width: 28px;							height: 28px;							border-radius: 100%;						}					}					.content {						font-size: 0;						flex: 1;						.username {							font-size: 10px;							color: rgb(7, 17, 27);							line-height: 12px;						}						.rate-time , .delivery-time {							font-size: 10px;							font-weight: 200;							line-height: 12px;							color: rgb(147, 153, 159);						}						.stars-wrapper {							display: inline-block;							margin: 4px 6px 6px 0;						}						.text {							font-size: 12px;							color: rgb(7, 17, 27);							line-height: 18px;							margin-bottom: 8px; 						}						.icon-recommand{							display: flex;							.icon-thumb {								flex: 0 0 12px;								font-size: 12px;								line-height: 16px;								margin-right: 8px;							}							.icon-thumb_up {								color: rgb(0, 160, 220);							}							.icon-thumb_down {								color: rgb(183, 187, 191);							}							.recommend-wrapper{								flex: 1;								display: inline-block;								font-size: 0;								.recommend {								display: inline-block;								box-sizing: content-box;								max-width: 65px;								padding: 0 6px;								font-size: 9px;								color: rgb(147, 153, 159);								line-height: 16px;								border: 1px solid rgba(7, 17, 27, 0.1);								margin: 0 8px 8px 0;								white-space: nowrap;								overflow: hidden;								text-overflow: ellipsis;								}							}													}											}									}			}		}	}}</style>